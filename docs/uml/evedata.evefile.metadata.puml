@startuml

class Metadata {
    name : string
    section : Section
}

class Data {
}
note bottom: See diagram for\ndata module.

enum Section {
    STANDARD
    SNAPSHOT
    MONITOR
    META
}

enum Transport {
    CA
    LOCAL
}
note bottom: This is defined in the\nscml.setup module\nas well. Generalise?\nUse instance from there?

interface DeviceMetadata {
    id : string
    pv : string
    transport_type : Transport
}

class MeasureMetadata extends Metadata {
    unit : string
}

class MonitorMetadata extends Metadata implements DeviceMetadata {
    section : Section.MONITOR
}

class AxisMetadata extends MeasureMetadata implements DeviceMetadata  {
}

class ChannelMetadata extends MeasureMetadata implements DeviceMetadata  {
    normalise_id : string
}

class TimestampMetadata extends MeasureMetadata {
    section : Section.META
}

class ExternalMetadata extends MeasureMetadata implements DeviceMetadata {
    format : string
}

class StandardChannelMetadata extends ChannelMetadata {}

class AverageChannelMetadata extends ChannelMetadata {
    low_limit : float
    max_attempts : integer
    max_deviation : float
}
note bottom
    These attributes may change for individual values
    and are currently saved in eveH5 for each position.

    If we go for separate detectors if they are
    redefined in different scan modules,
    would this solve the problem?
end note

class IntervalChannelMetadata extends ChannelMetadata {
    trigger_interval : float
}

class ArrayChannelMetadata extends ChannelMetadata {
}

class AreaChannelMetadata extends ChannelMetadata {
}

Data *- Metadata

@enduml
