@startuml

class Metadata {
    name : string
    section : Section
}

class Data {
}
note bottom: See diagram for\ndata module.

enum Section {
    STANDARD
    SNAPSHOT
    MONITOR
    META
}

enum Transport {
    CA
    LOCAL
}
note bottom: This is defined in the\nscml.setup module\nas well. Generalise?

interface DeviceMetadata {
    id : string
    pv : string
    transport_type : Transport
}

class MeasureMetadata {
    unit : string
}

class MonitorMetadata implements DeviceMetadata {
    section : Section.MONITOR
}

class MotorMetadata implements DeviceMetadata  {
}

class DetectorMetadata implements DeviceMetadata  {
    normalise_id : string
}

class ExternalMetadata {
    format : string
}

class TimestampMetadata {
    section : Section.META
}

class AverageDetectorMetadata {
    low_limit : float
    max_attempts : integer
    max_deviation : float
}
note bottom
    These attributes may change for individual values
    and are currently saved in eveH5 for each position.

    If we go for separate detectors if they are
    redefined in different scan modules,
    would this solve the problem?
end note

class IntervalDetectorMetadata {
    trigger_interval : float
}

class ArrayDetectorMetadata {
}

Data *- Metadata
Metadata <|-- MeasureMetadata
Metadata <|-- MonitorMetadata
MeasureMetadata <|-- DetectorMetadata
MeasureMetadata <|-- MotorMetadata
MeasureMetadata <|-- ExternalMetadata
MeasureMetadata <|-- TimestampMetadata
DetectorMetadata <|-- AverageDetectorMetadata
DetectorMetadata <|-- IntervalDetectorMetadata
DetectorMetadata <|-- ArrayDetectorMetadata

@enduml
