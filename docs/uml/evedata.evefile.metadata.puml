@startuml

class Metadata {
    name : string
    section : Section
}

class Data {
}
note bottom: See diagram for\ndata module.

enum Section {
    STANDARD
    SNAPSHOT
    MONITOR
    META
}

enum Transport {
    CA
    LOCAL
}
note bottom: This is defined in the\nscml.setup module\nas well. Generalise?

interface DeviceMetadata {
    id : string
    pv : string
    transport_type : Transport
}

class MeasureMetadata {
    unit : string
}

class MonitorMetadata implements DeviceMetadata {
    section : Section.MONITOR
}

class MotorMetadata implements DeviceMetadata  {
}

class DetectorMetadata implements DeviceMetadata  {
    normalise_id : string
}

class TimestampMetadata {
    section : Section.META
}

class ScanModuleMetadata {
    section : Section.META
}

class AverageDetectorMetadata {
    n_averages : integer
    low_limit : float
    max_attempts : integer
    max_deviation : float
}
note bottom
    These attributes may change      for individual values.

     Is that true even for only one detector in one scan module?
     If we go for separate detectors in this case, would it solve
     the problem?
end note

class IntervalDetectorMetadata {
    trigger_interval : float
}

Data *- Metadata
Metadata <|-- MeasureMetadata
Metadata <|-- MonitorMetadata
MeasureMetadata <|-- DetectorMetadata
MeasureMetadata <|-- MotorMetadata
MeasureMetadata <|-- TimestampMetadata
MeasureMetadata <|-- ScanModuleMetadata
DetectorMetadata <|-- AverageDetectorMetadata
DetectorMetadata <|-- IntervalDetectorMetadata

@enduml
